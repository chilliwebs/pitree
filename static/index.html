<!DOCTYPE html>
<html>

<head>
    <title>PiTree</title>
    <style>
        #update {
            width: 2em;
            height: 2em;
            vertical-align: middle;
        }
    </style>
    <script>
        function setMode(no) {
            fetch('/mode?no='+no).then((resp) => {
                window.location.reload();
            });
        }

        window.onload = async function () {
            fetch('/ver').then(async (ver) => {
                var version = await ver.text();
                document.getElementById('ver').innerText = version;
                document.title = "PiTree v" + version;
            });
            document.getElementById('update').onclick = function () {
                fetch('/update').then((resp) => {
                    window.location.reload();
                });
            }
            document.getElementById('mode0').onclick = function () {
                setMode(0);
            }
            document.getElementById('mode1').onclick = function () {
                setMode(1);
            }
            document.getElementById('mode2').onclick = function () {
                setMode(2);
            }

            var fgit = await fetch('/git');
            var git = await fgit.text();
            var fremote = await fetch('/git-remote');
            var remote = await fremote.text();
            if(git != remote) {
                document.getElementById('update').style.display = 'inline';
            }
        }
    </script>
</head>

<body>
    <div>PiTree v<span id="ver">loading...</span> <img id="update" style="display: none;" src="update.png" /></div>
    <button id="mode0">Warm</button><button id="mode1">White</button><button id="mode2">Random</button>
</body>

</html>